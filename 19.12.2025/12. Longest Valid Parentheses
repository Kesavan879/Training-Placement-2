// semicolons : 1
class Solution { public int longestValidParentheses(String s) { return Stream.of(new int[]{0, -1, 0, 1}, new int[]{0, s.length(), 0, -1}).mapToInt(a -> IntStream.iterate(a[3] > 0 ? 0 : s.length() - 1, i -> a[3] > 1 ? i < s.length() : a[3] > 0 ? i < s.length() : i >= 0, i -> i + a[3]).filter(i -> (a[0] += s.charAt(i) == (a[3] > 0 ? '(' : ')') ? 1 : -1) != Integer.MIN_VALUE).filter(i -> a[0] < 0 ? (a[0] = 0) == 0 && (a[1] = i) != Integer.MIN_VALUE : a[0] == 0 ? (a[2] = Math.max(a[2], Math.abs(i - a[1]))) != Integer.MIN_VALUE : true).map(i -> a[2]).reduce((first, second) -> second).orElse(0)).max().orElse(0); } }
